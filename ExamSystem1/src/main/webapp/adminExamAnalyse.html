<!DOCTYPE HTML>
<html>
	<head>
		<title>Blank Page</title>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta name="keywords" content="Novus Admin Panel Responsive web template, Bootstrap Web Templates, Flat Web Templates, Android Compatible web template, 
		SmartPhone Compatible web template, free WebDesigns for Nokia, Samsung, LG, SonyEricsson, Motorola web design" />
		<script type="application/x-javascript">
			addEventListener("load", function() {
				setTimeout(hideURLbar, 0);
			}, false);

			function hideURLbar() {
				window.scrollTo(0, 1);
			}
		</script>
		<!-- Bootstrap Core CSS -->
		<link href="/exam/css/bootstrap.css" rel='stylesheet' type='text/css' />
		<!-- Custom CSS -->
		<link href="/exam/css/style.css" rel='stylesheet' type='text/css' />
		<!-- font CSS -->
		<!-- font-awesome icons -->
		<link href="/exam/css/font-awesome.css" rel="stylesheet">
		<!-- //font-awesome icons -->
		<!-- js-->
		<script src="/exam/js/jquery-1.11.1.min.js"></script>
		<script src="/exam/js/modernizr.custom.js"></script>
		<!--animate-->
		<link href="/exam/css/animate.css" rel="stylesheet" type="text/css" media="all">
		<script src="/exam/js/wow.min.js"></script>
		<script>
			new WOW().init();
			</script>
		<!--//end-animate-->
		<!-- Metis Menu -->
		<script src="/exam/js/metisMenu.min.js"></script>
		<script src="/exam/js/custom.js"></script>
		<link href="/exam/css/custom.css" rel="stylesheet">
		<!--//Metis Menu -->
		<style>
			.middle{
	 margin:0 auto; 
	 width:350px; 
	 height:100px; 
	 } //border:1px solid #F00
</style>
	</head>
	<body class="cbp-spmenu-push">
		<div class="main-content">
			<!--left-fixed -navigation-->
			<div class=" sidebar" role="navigation">
				<div class="navbar-collapse">
					<nav class="cbp-spmenu cbp-spmenu-vertical cbp-spmenu-left" id="cbp-spmenu-s1">
						<ul class="nav" id="side-menu">

							<li>
								<a href="/exam/admin.html"><i class="fa fa-home nav_icon"></i>管理员主页</a>
							</li>
							<li>
								<a href="/exam/adminmanage2.html"><i class="fa fa-user nav_icon"></i>用户管理</a>
							</li>
							<li>
								<a href="/exam/adminCourse.html"><i class="fa fa-book nav_icon"></i>安排课程</a>
							</li>
							<li>
								<a href="/exam/adminexam2.html"><i class="fa fa-file nav_icon"></i>安排考试</a>
							</li>
							<li>
								<a href="/exam/adminExamAnalyse.html"><i class="fa fa-list nav_icon"></i>成绩分析</a>
							</li>
						</ul>
						<div class="clearfix"> </div>
						<!-- //sidebar-collapse -->
					</nav>
				</div>
			</div>
			<!--left-fixed -navigation-->
			<!-- header-starts -->
			<div class="sticky-header header-section ">
				<div class="header-left">
					<!--toggle button start-->
					<button id="showLeftPush"><i class="fa fa-bars"></i></button>
					<!--toggle button end-->
					<!--logo -->
					<div class="logo">
						<a href="/exam/admin.html">
							<h1>管理员</h1>
							<span>学生考试系统</span>
						</a>
					</div>
					<!--//logo-->
					<!--search-box-->
					<!--//end-search-box-->
					<div class="clearfix"> </div>
				</div>
				<div class="header-right">
					<div class="profile_details_left">
						<!--notifications of menu start -->
						<ul class="nofitications-dropdown">

							<li class="dropdown head-dpdn">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false"><i class="fa fa-bell"></i><span
									 class="badge blue1">1</span></a>
								<ul class="dropdown-menu">
									<li>
										<div class="notification_header">
											<h3>有1次考试正在进行</h3>
										</div>
									</li>
								</ul>
							</li>
						</ul>
						<div class="clearfix"> </div>
					</div>
					<!--notification menu end -->
					<div class="profile_details">
						<ul>
							<li class="dropdown profile_details_drop">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
									<div class="profile_img">
										<div class="user-name">
											<p>Wikolia</p>
											<span>Administrator</span>
										</div>
										<i class="fa fa-angle-down lnr"></i>
										<i class="fa fa-angle-up lnr"></i>
										<div class="clearfix"></div>
									</div>
								</a>
								<ul class="dropdown-menu drp-mnu">
									<li> <a href="/exam/admin.html"><i class="fa fa-user"></i> Profile</a> </li>
									<li> <a href="/exam/login1.html"><i class="fa fa-sign-out"></i> Logout</a> </li>
								</ul>
							</li>
						</ul>
					</div>
					<div class="clearfix"> </div>
				</div>
				<div class="clearfix"> </div>
			</div>
			<!-- //header-ends -->
			<!-- main content start-->
			<div id="page-wrapper">
				<div class="main-page">
					<div class="blank-page widget-shadow scroll" id="style-2 div1">
						<!-- 搜索框 -->
						<div class="middle">
							<form class="form-inline" id="searchForm">
								<div class="form-group">
									<div class="input-group">
										<span class="input-group-addon" style="width:50px">
											<span class="glyphicon glyphicon-book"></span>
										</span>
										<input type="text" class="form-control" placeholder="Course Name" aria-describedby="basic-addon1" id="searchCourse"
										 style="width:200px">
										<button type="button" class="btn btn-default" id="searchButton">
											<span class="glyphicon glyphicon-search"></span>
										</button>
									</div>
								</div>
							</form>
						</div>
						<!-- 搜索框 -->

						<!-- 列表 -->
						<table class="table table-striped">
							<thead>
								<tr>
									<th>考试名称</th>
									<th>考试人数</th>
									<th>及格人数</th>
									<th>平均分</th>
								</tr>
							</thead>
							<tbody>
								<tr id="first">

								</tr>
							</tbody>
						</table>
						<!-- 列表 -->
						
					</div>
				</div>
			</div>
		</div>
		<!--footer-->
		<div class="footer">
			<p>学生考试系统</p>
		</div>
		<!--//footer-->

		<!-- Classie -->
		<script src="/exam/js/classie.js"></script>
		<script>
			var menuLeft = document.getElementById('cbp-spmenu-s1'),
				showLeftPush = document
				.getElementById('showLeftPush'),
				body = document.body;

			showLeftPush.onclick = function() {
				classie.toggle(this, 'active');
				classie.toggle(body, 'cbp-spmenu-push-toright');
				classie.toggle(menuLeft, 'cbp-spmenu-open');
				disableOther('showLeftPush');
			};

			function disableOther(button) {
				if (button !== 'showLeftPush') {
					classie.toggle(showLeftPush, 'disabled');
				}
			}

			/* //查询
		$("#course-name").change(function() {
			var courseId = $("#course-name").val();
			var queryURL = "/exam/analyse/query/" + courseId;
			
			
   			$.ajax({
 				url : queryURL,
 				type : "GET",
 				dataType : "json",
 				success : function(str) {

 					$("#first").siblings().remove();
 					var res = "";
 					$(str).each(function(index, e) {
 						res = res + "<tr>";
 						res = res + "<td>" + e.examId + "</td>";
 						res = res + "<td>" + e.examPeople + "</td>";
 						res = res + "<td>" + e.examPassPeople + "</td>";
 						res = res + "<td>" + e.examAverage + "</td>";
 						res = res + "</tr>"
						
 					});
 					var app = $(res);
 					$("#first").after(app);
 				},
 				error : function() {
 				}
 			}); 
		});
 		$(document).ready(function() {
			var courseId = $("#course-name").val();
			var queryURL = "/exam/analyse/query/" + courseId;
			
			$.ajax({
				url : queryURL,
				type : "GET",
				dataType : "json",
				success : function(str) {

					$("#first").siblings().remove();
					var res = "";
					$(str).each(function(index, e) {
						res = res + "<tr>";
						res = res + "<td>" + e.examId + "</td>";
						res = res + "<td>" + e.examPeople + "</td>";
						res = res + "<td>" + e.examPassPeople + "</td>";
						res = res + "<td>" + e.examAverage + "</td>";
						res = res + "</tr>"

					});
					var app = $(res);
					$("#first").after(app);
				},
				error : function() {
				}
			});			
		}); */

			$("#searchButton").click(function() {
				var courseId = $("#searchCourse").val();
				if (courseId == null || courseId == "") {
					courseId = "All";
				}
				var queryURL = "/exam/exams/queryAll/" + courseId;
				alert(courseId);
				$.ajax({
					url: queryURL,
					type: "GET",
					dataType: "json",
					success: function(str1) {
						$("#first").siblings().remove();
						$(str1).each(function(index, e) {
							var queryURL = "/exam/answer/query/" + e.id;
							$.ajax({
								url: queryURL,
								type: "GET",
								dataType: "json",
								success: function(str2) {
									var queryURL = "/exam/exams/getPaperPoint/" + e.id;
									$.ajax({
										url: queryURL,
										type: "GET",
										dataType: "text",
										success: function(str3) {
											var res = "";
											var sumPoints = 0;
											var number = 0;
											var passnum = 0;
											var fullpoint = parseInt(str3);
											var passpoint = parseInt(str3) * 0.6;
											$(str2).each(function(index, answer) {
												number++;
												sumPoints += answer.result;
												if (answer.result >= passpoint) {
													passnum++;
												}

											});
											res = res + "<tr>";
											res = res + "<td>" + e.id + "</td>";
											res = res + "<td>" + number + "</td>";
											res = res + "<td>" + passnum + "</td>";
											res = res + "<td>" + sumPoints / number + "</td>";
											res = res + "</tr>"
											var app = $(res);
											$("#first").after(app);
										},
										error: function() {}
									});
								},
								error: function() {}
							});
						});
					},
					error: function() {}
				});
			});
			$(document).ready(function() {
				var queryURL = "/exam/exams/queryAll/All";
				$.ajax({
					url: queryURL,
					type: "GET",
					dataType: "json",
					success: function(str1) {
						$("#first").siblings().remove();
						$(str1).each(function(index, e) {
							var queryURL = "/exam/answer/query/" + e.id;
							$.ajax({
								url: queryURL,
								type: "GET",
								dataType: "json",
								success: function(str2) {
									var queryURL = "/exam/exams/getPaperPoint/" + e.id;
									$.ajax({
										url: queryURL,
										type: "GET",
										dataType: "text",
										success: function(str3) {
											var res = "";
											var sumPoints = 0;
											var number = 0;
											var passnum = 0;
											var fullpoint = parseInt(str3);
											var passpoint = parseInt(str3) * 0.6;
											$(str2).each(function(index, answer) {
												number++;
												sumPoints += answer.result;
												if (answer.result >= passpoint) {
													passnum++;
												}

											});
											res = res + "<tr>";
											res = res + "<td>" + e.id + "</td>";
											res = res + "<td>" + number + "</td>";
											res = res + "<td>" + passnum + "</td>";
											res = res + "<td>" + sumPoints / number + "</td>";
											res = res + "</tr>"
											var app = $(res);
											$("#first").after(app);
										},
										error: function() {}
									});
								},
								error: function() {}
							});
						});
					},
					error: function() {}
				});
			});
			/* $(document).ready(function() {
				var courseId = $("#course-name").val();
				var queryURL = "/exam/analyse/query/" + courseId;
				
				$.ajax({
					url : queryURL,
					type : "GET",
					dataType : "json",
					success : function(str) {
		
						$("#first").siblings().remove();
						var res = "";
						$(str).each(function(index, e) {
							res = res + "<tr>";
							res = res + "<td>" + e.examId + "</td>";
							res = res + "<td>" + e.examPeople + "</td>";
							res = res + "<td>" + e.examPassPeople + "</td>";
							res = res + "<td>" + e.examAverage + "</td>";
							res = res + "</tr>"
		
						});
						var app = $(res);
						$("#first").after(app);
					},
					error : function() {
					}
				});			
			});
		
		
			$.ajax({
				url:"http://localhost:8080/exam/query/teaname",
				success:function(str){
					$("#teaname").html(str)
				},
				error:function(status){
					
				}
			});	 */
		</script>
		<!--scrolling js-->
		<script src="/exam/js/jquery.nicescroll.js"></script>
		<script src="/exam/js/scripts.js"></script>
		<!--//scrolling js-->
		<!-- Bootstrap Core JavaScript -->
		<script src="/exam/js/bootstrap.js"></script>
	</body>
</html>

<!DOCTYPE HTML>
<html>
	<head>
		<title>学生空页</title>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta name="keywords" content="Novus Admin Panel Responsive web template, Bootstrap Web Templates, Flat Web Templates, Android Compatible web template, 
		SmartPhone Compatible web template, free WebDesigns for Nokia, Samsung, LG, SonyEricsson, Motorola web design" />
		<script type="application/x-javascript"> addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false); function hideURLbar(){ window.scrollTo(0,1); } </script>
		<!-- Bootstrap Core CSS -->
		<link href="/exam/css/bootstrap.css" rel='stylesheet' type='text/css' />
		<!-- Custom CSS -->
		<link href="/exam/css/style.css" rel='stylesheet' type='text/css' />
		<!-- font CSS -->
		<!-- font-awesome icons -->
		<link href="/exam/css/font-awesome.css" rel="stylesheet"> 
		<!-- //font-awesome icons -->
		 <!-- js-->
		<script src="/exam/js/jquery-1.11.1.min.js"></script>
		<script src="/exam/js/modernizr.custom.js"></script>
		<!--animate-->
		<link href="/exam/css/animate.css" rel="stylesheet" type="text/css" media="all">
		<script src="/exam/js/wow.min.js"></script>
			<script>
				 new WOW().init();
			</script>
		<!--//end-animate-->
		<!-- Metis Menu -->
		<script src="/exam/js/metisMenu.min.js"></script>
		<script src="/exam/js/custom.js"></script>
		<link href="/exam/css/custom.css" rel="stylesheet">
		<!--//Metis Menu -->
	</head>
	<body class="cbp-spmenu-push">
		<div class="main-content">
			<!--left-fixed -navigation-->
			<div class=" sidebar" role="navigation">
				<div class="navbar-collapse">
					<nav class="cbp-spmenu cbp-spmenu-vertical cbp-spmenu-left" id="cbp-spmenu-s1">
						<ul class="nav" id="side-menu">
							<li>
								<a href="/exam/blankStudentPage.html"><i class="fa fa-home nav_icon"></i>学生主页</a>
							</li>
							<li>
								<a href="#"><i class="fa fa-file-text-o nav_icon"></i>考试<span class="fa arrow"></span></a>
								<ul class="nav nav-second-level collapse">
									<li>
										<a href="/exam/joinExam.html">参加考试</a>
									</li>
									<li>
										<a href="/exam/studentScoreQuery.html">查看成绩</a>
									</li>
								</ul>
								<!-- /nav-second-level -->
							</li>
							<li>
								<a href="/exam/practiceTest.html"><i class="fa fa-book nav_icon"></i>模拟练习</a>
							</li>
							<li>
								<a href="/exam/studentAppeal.html"><i class="fa fa-check-square-o nav_icon"></i>试卷答疑</a>
							</li>
						</ul>
						<div class="clearfix"> </div>
						<!-- //sidebar-collapse -->
					</nav>
				</div>
			</div>
			<!--left-fixed -navigation-->
			<!-- header-starts -->
			<div class="sticky-header header-section ">
				<div class="header-left">
					<!--toggle button start-->
					<button id="showLeftPush"><i class="fa fa-bars"></i></button>
					<!--toggle button end-->
					<!--logo -->
					<div class="logo">
						<a href="index.html">
							<h1>学生</h1>
							<span>学生考试系统</span>
						</a>
					</div>
					<!--//logo-->
					<!--search-box-->
					<div class="search-box">
						<form class="input">
							<input class="sb-search-input input__field--madoka" placeholder="Search..." type="search" id="input-31" />
							<label class="input__label" for="input-31">
								<svg class="graphic" width="100%" height="100%" viewBox="0 0 404 77" preserveAspectRatio="none">
									<path d="m0,0l404,0l0,77l-404,0l0,-77z" />
								</svg>
							</label>
						</form>
					</div>
					<!--//end-search-box-->
					<div class="clearfix"> </div>
				</div>
				<div class="header-right">
					<div class="profile_details_left">
						<!--notifications of menu start -->
						<ul class="nofitications-dropdown">

							<li class="dropdown head-dpdn">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false"><i class="fa fa-bell"></i><span
									 class="badge blue1">1</span></a>
								<ul class="dropdown-menu">
									<li>
										<div class="notification_header">
											<h3>有1次考试正在进行</h3>
										</div>
									</li>
								</ul>
							</li>
						</ul>
						<div class="clearfix"> </div>
					</div>
					<!--notification menu end -->
					<div class="profile_details">
						<ul>
							<li class="dropdown profile_details_drop">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
									<div class="profile_img">
										<div class="user-name">
											<p>Arcane</p>
											<span>Student</span>
										</div>
										<i class="fa fa-angle-down lnr"></i>
										<i class="fa fa-angle-up lnr"></i>
										<div class="clearfix"></div>
									</div>
								</a>
								<ul class="dropdown-menu drp-mnu">
									<li> <a href="/exam/blankStudentPage.html"><i class="fa fa-user"></i> Profile</a> </li>
									<li> <a href="/exam/login1.html"><i class="fa fa-sign-out"></i> Logout</a> </li>
								</ul>
							</li>
						</ul>
					</div>
					<div class="clearfix"> </div>
				</div>
				<div class="clearfix"> </div>
			</div>
			<!-- //header-ends -->
			<!-- main content start-->
			<div id="page-wrapper">
				<div class="main-page">
					<h3 class="title1">参加考试</h3>
					<div class="blank-page widget-shadow scroll" id="style-2 div1">
						<div style="position:relative; height:600px; overflow-y:auto">
							<table class="table table-striped">
								<thead>
									<tr>
										<th>课程</th>
										<th>考试</th>
										<th>状态</th>
										<th>详情</th>
										<th>参加</th>
									</tr>
								</thead>
								<tbody>
									<tr id="first">
										
									</tr>
								</tbody>
							</table>
						</div>

					</div>
				</div>
			</div>
			<!--footer-->
			<div class="footer">
				<p>学生考试系统</p>
			</div>
			<!--//footer-->
		</div>
				<!-- Classie -->
		<script src="/exam/js/classie.js"></script>
		<script>
			var menuLeft = document.getElementById('cbp-spmenu-s1'),
				showLeftPush = document.getElementById('showLeftPush'),
				body = document.body;
		
			showLeftPush.onclick = function() {
				classie.toggle(this, 'active');
				classie.toggle(body, 'cbp-spmenu-push-toright');
				classie.toggle(menuLeft, 'cbp-spmenu-open');
				disableOther('showLeftPush');
			};
		
			function disableOther(button) {
				if (button !== 'showLeftPush') {
					classie.toggle(showLeftPush, 'disabled');
				}
			}
			$(document).ready(function(){
				var queryURL = "/exam/student/join";
				$.ajax({
					url:queryURL,
					type:"GET",
					dataType:"json",
					success:function(str){
						auto_list(str);
					},
					error:function(){
					}
				});
				});
			
				function auto_list(str) {
					//清空id=first的所有兄弟节点
					$("#first").siblings().remove();
					var res="";
					var date = new Date();
					$(str).each(function(index,e){
						res = res + "<tr>";
						res = res + "<td>"+e.courseId+"</td>";
						res = res + "<td>"+e.id+"</td>";
						var endtimestr = e.endtime;
						var begintimestr = e.begintime;
						var endtime = new Date(endtimestr.slice(0,4),endtimestr.slice(5,7),endtimestr.slice(8,10),endtimestr.slice(11,13),endtimestr.slice(14,16),endtimestr.slice(17,19));
						var begintime = new Date(begintimestr.slice(0,4),begintimestr.slice(5,7),begintimestr.slice(8,10),begintimestr.slice(11,13),begintimestr.slice(14,16),begintimestr.slice(17,19));
						if(date>begintime){
							res = res + "<td>未开始</td>";
						}
						else if(date<begintime){
							if(date<endtime){
								res = res + "<td>已结束</td>";
							}
								
							else if(date>endtime){
								res = res + "<td>正在进行</td>";
							}
						}
						res = res +"<td>"
									+		"<button type=\"button\" class=\"btn btn-default\" data-toggle=\"modal\" data-target=\"#moreModal\">"
									+			"<span class=\"glyphicon glyphicon-list\"></span>"
									+		"</button>"
									+		"<div class=\"modal fade\" id=\"moreModal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"myModalLabel\""
									+		" aria-hidden=\"true\">"
									+			"<div class=\"modal-dialog\">"
									+				"<div class=\"modal-content\">"
									+					"<div class=\"modal-header\">"
									+						"<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\">&times;</button>"
									+						"<h4 class=\"modal-title\" id=\"myModalLabel\">考试详情</h4>"
									+					"</div>"
									+					"<div class=\"modal-body\">"
									+						"<table class=\"table\">"
									+							"<tbody>"
									+								"<tr>"
									+									"<td>课程</td>"
									+									"<td>"+e.courseId+"</td>"
									+								"</tr>"
									+								"<tr class=\"success\">"
									+									"<td>考试名</td>"
									+									"<td>"+e.id+"</td>"
									+								"</tr>"
									+								"<tr>"
									+									"<td>考试开始时间</td>"
									+									"<td>"+e.begintime+"</td>"
									+								"</tr>"
									+								"<tr class=\"info\">"
									+								"	<td>考试时长</td>"
									+								"	<td>"+e.period+"分钟</td>"
									+								"</tr>"
									+								"<tr>"
									+									"<td>考试结束时间</td>"
									+									"<td>"+e.endtime+"</td>"
									+								"</tr>"
									+								"<tr class=\"danger\">"
									+									"<td>考试试卷</td>"
									+									"<td>"+e.papers.id+"</td>"
									+								"</tr>"
									+								"<tr>"
									+									"<td>考试描述</td>"
									+									"<td>"+e.discript+"</td>"
									+								"</tr>"
									+								"<tr class=\"warning\">"
									+								"	<td>考场</td>"
									+								"	<td>"+e.place+"</td>"
									+								"</tr>"
									+								"<tr>"
									+								"	<td>监考教师</td>"
									+								"	<td>"+e.supervisor+"</td>"
									+								"</tr>"
									+							"</tbody>"
									+						"</table>"
									+					"</div>"
									+					"<div class=\"modal-footer\">"
									+					"	<button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">关闭</button>"
									+					"</div>"
									+				"</div>"
									+			"</div>"
									+		"</div>"
									+	"</td>"
						res = res +"<td> <button type=\"button\" class=\"btn btn-default\" onclick=\"javascript:location.href='/exam/studentExamPage.html?examId="+e.id+"'\">"
								  +			"<span class=\"glyphicon glyphicon-pencil\"></span></button></td>"
						res = res + "</tr>"
						
					});
					var app = $(res);
					$("#first").after(app);
				}
				
		</script>
		<!--scrolling js-->
		<script src="/exam/js/jquery.nicescroll.js"></script>
		<script src="/exam/js/scripts.js"></script>
		<!--//scrolling js-->
		<!-- Bootstrap Core JavaScript -->
		<script src="/exam/js/bootstrap.js"> </script>
	</body>
</html>
